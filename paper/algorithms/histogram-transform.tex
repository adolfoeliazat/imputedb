%\begin{algorithm}
  \begin{algorithmic}
    \Require{$\mathbb{H}$ is a map from attribute names to histograms, $op$ is an operator node in a logical query plan}
    \Ensure{Returns an updated map $\mathbb{H'}$}
    
    \Function{UpdateHistograms}{$\mathbb{H}, op$}
    	\If{op = $\delta_C$}
		\State $\mathbb{H'} \gets \{ c \mapsto h' | h' = \mathbb{H}[c] \text{ without nulls } \text{ if } c \in C \text{ else } \mathbb{H}[c] \}$
		\State $\{ c \mapsto h' | h' = \mathbb{H'}[c] \text{ scaled to } min \text{ cardinality in } \mathbb{H'} \}$
	\ElsIf{op = $\mu_C$}
	\State $\{ c \mapsto h' | h' = \text{ nulls redistributed by } \mathbb{H}[c]  \text{ if } c \in C \text{ else } \mathbb{H}[c]\}$
	\ElsIf{op = $\sigma$}
		\State $\{ c \mapsto h' | h' = \mathbb{H}[c] \text{ scaled by } \Call{Selectivity}{\sigma} \}$
	\ElsIf{op = $\bowtie_\phi$}
		\State $\{ c \mapsto h' | h' = \mathbb{H}[c] \text{scaled to } \Call{Cardinality}{\bowtie_{\phi}} \}$
	\Else
		\State $\mathbb{H}$
	\EndIf
    \EndFunction
  \end{algorithmic}
  \caption{An algorithm for in-plan histogram updates}
  \label{algo:histogram-transformation}
%\end{algorithm}
